<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="author" content="Nik Davis">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Gathering Data from the Steam Store API using Python | Nik Davis</title>

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="alternate" type="application/atom+xml" title="Nik Davis blog atom feed" href="/feeds/all.atom.xml" />

    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700'>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="/theme/css/style.css"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    
<!-- <link rel="stylesheet" type="text/css" href="/theme/css/ipynb.css"/> -->
<!-- <link rel="stylesheet" type="text/css" href="/theme/css/ipynb-from-download.css"/> -->
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-dark">
        <a class="navbar-brand" href="/" title="Home">Nik Davis</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav ml-md-auto">
                    <li class="nav-item">
                        <a class="nav-link social" href="http://github.com/nik-davis" rel="me" target="_blank"><i class="fab fa-github"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link social" href="http://twitter.com/nikdavis0" rel="me" target="_blank"><i class="fab fa-twitter"></i></a>
                    </li>                    <li class="nav-item">
                        <a class="nav-link social" href="https://www.linkedin.com/in/nik-davis" rel="me" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link social" href="https://stackoverflow.com/users/10202890/nik-davis" rel="me" target="_blank"><i class="fab fa-stack-overflow"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/pages/about.html" title="About">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/archives.html" title="Archive">Archive</a>
                    </li>
            </ul>
        </div>
    </nav>

    <div id="wrap">
<div class="container post">
    <article>
        <header>
            <h1>Gathering Data from the Steam Store API using Python</h1>
            <time datetime="article.date.isoformat()" pubdate>Tue 28 May 2019</time>
        </header>

        <div class="article_content">
            <p><em>This post forms part of a larger series on downloading, processing and analysing data from the Steam store. <a href="https://nik-davis.github.io/tag/steam.html">See all posts here</a>.</em></p>
<p><em>View original notebook on <a href="https://github.com/nik-davis/steam-data-science-project">github</a> (<a href="http://nik-davis.github.io/notebooks/steam/1-data-collection.ipynb">Download</a>), with an interactive version available on <a href="https://colab.research.google.com/github/nik-davis/steam-data-science-project/blob/master/notebooks/1-data-collection.ipynb">Google Colaboratory</a>. Datasets available on <a href="https://www.kaggle.com/nikdavis/datasets">Kaggle</a>.</em></p>
<p>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://nik-davis.github.io/images/steam_logo_white.jpg" alt="steam_logo"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The first time I used Steam was with an account I can't remember the name of, playing a game which could well have been <a href="https://store.steampowered.com/app/2100/Dark_Messiah_of_Might__Magic/">Dark Messiah of Might &amp; Magic</a>, on a computer that would easily be blown away by the processing power of my phone today.</p>
<p>It was sometime in 2006, when every game I bought came on a disk in a box that now gathers dust somewhere in my parents' house. Surprisingly my current PC has a disk drive, though I can't remember the last time used it.</p>
<p>In order to play the multiplayer component of the game, annoyingly I had to install a piece of third-party software I had never heard of called Steam, creating the account I have long since lost in the process. Here's what that software probably looked like at the time:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p class="source" style="text-align: center"><img src="https://nik-davis.github.io/images/steam_store_2006.jpg" width="700">Source: <a href="https://gfycat.com/@pcgevan">pcgevan</a> via <a href=https://www.pcgamer.com/uk/steam-versions/>PC Gamer</a></p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Fast-forward a little over 10 years and the <a href="https://en.wikipedia.org/wiki/Steam_(software)">Steam Store</a> is huge, ubiquitous as the home of PC gaming and distribution. Whilst physical copies still just about feel at home on consoles, the PC market has <a href="https://www.pcgamer.com/uk/analyst-says-digital-sales-made-up-92-percent-of-pc-game-market-in-2013/">long since moved digital</a>. In case you are not familiar, Steam is a digital store for purchasing, downloading and playing video games. It hosts a variety of community features, allows pushing game updates to users automatically, and gathers news stories relevant to each title. It's a bit like <a href="https://play.google.com">Google's Play Store</a> or <a href="https://www.apple.com/uk/ios/app-store/">Apple's App Store</a> for phones.</p>
<p>A large part of Steam's success as a platform is due to its use of frequent sales, convenience as a unified digital game library, and the aforementioned shift to digital over physical. Whilst other platforms are emerging and gaining traction, there is likely no better resource for examining gaming over the last decade. With that in mind, if we can construct a dataset from Steam's data, we will have access to a wealth of information about <a href="https://store.steampowered.com/about/">nearly 30,000 games</a> released since 2003, when Steam first launched.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Project-Goals">Project Goals<a class="anchor-link" href="#Project-Goals">&#182;</a></h2>

<p>The motivation for this project is to download, process and analyse a data set of Steam apps (games) from the Steam store, and gain insights into what makes a game more successful in terms of sales, play-time and ratings. We will imagine that we have been approached by a company hoping to develop and release a new title, using the findings we provide them to inform decisions about how best to manage their budget and hopefully increase the success of their next release.</p>
<p>The first step will be tackling data collection - the actual retrieval of data from Steam's servers and databases. In the future we'll look at cleaning the data, transforming it into a more useful state, then on to data exploration and analysis. Finally we'll summarise our findings in a non-technical report which would be sent to the fictional company in question.</p>


<p>At the end of the data collection and cleaning stages, we'd like to end up with a table or database like this:</p>
<table>
<thead><tr>
<th>name</th>
<th>id</th>
<th>information</th>
<th>owners</th>
<th>price</th>
<th>rating</th>
</tr>
</thead>
<tbody>
<tr>
<td>awesome game</td>
<td>100</td>
<td>genres, descriptors, variables</td>
<td>100,000</td>
<td>£9.99</td>
<td>9/10</td>
</tr>
<tr>
<td>generic shooter 4</td>
<td>200</td>
<td>definitely the best shooter</td>
<td>50,000</td>
<td>£39.99</td>
<td>6/10</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
<p>We can then interrogate the data, and investigate whether particular attributes tend to result in more successful games. Metrics like ownership and ratings should help define the success of a title.</p>
<h2 id="Data-Acquisition">Data Acquisition<a class="anchor-link" href="#Data-Acquisition">&#182;</a></h2><p>There are a number of ways to get this information. Obviously we could search the web (and especially <a href="https://www.kaggle.com/datasets">kaggle</a>) for existing datasets, however to avoid letting someone else get away with all that hard work (and mainly for the purposes of learning) we'll be acquiring all the data ourselves from scratch.</p>
<p>Often when generating data the best place to start is to check for APIs. Fortunately Valve (the company behind Steam) make one available at <a href="https://partner.steamgames.com/">https://partner.steamgames.com/</a>. An <a href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> such as this allows anyone to interface with data on a website in a controlled way, usually providing a host of useful features to the end-user. Typically an API is a great way for developers to allow access to databases and information on a server. Unfortunately this documentation doesn't include all access points, but others have documented this for us. <a href="https://wiki.teamfortress.com/wiki/User:RJackson/StorefrontAPI">This</a> documentation of the StorefrontAPI will be particularly useful.</p>
<p>We'll be able to get good information about the details of each game from the Steam API, however we're still missing information about popularity and sales. Luckily we can easily get this data from another website, SteamSpy.</p>
<p><a href="https://steamspy.com/about">SteamSpy</a> is a Steam stats-gathering service and crucially has data easily available through its own API (documentation <a href="https://steamspy.com/api.php">here</a>). It provides a number of useful metrics including an estimation for total owners of each game.</p>
<p>We'll be retrieving data from both APIs and combining them to form our dataset. For the purposes of this project, we'll be performing as little data cleaning as possible at this stage, providing 'dirty' data for data cleaning, the next step in this project.</p>
<h2 id="Section-outline:">Section outline:<a class="anchor-link" href="#Section-outline:">&#182;</a></h2><ul>
<li>Create an app list from SteamSpy API using 'all' request</li>
<li>Retrieve individual app data from Steam API, by iterating through app list</li>
<li>Retrieve individual app data from SteamSpy API, by iterating through app list</li>
<li>Export app list, Steam data and SteamSpy data to csv files</li>
</ul>
<h2 id="API-references:">API references:<a class="anchor-link" href="#API-references:">&#182;</a></h2><ul>
<li><a href="https://partner.steamgames.com/doc/webapi">https://partner.steamgames.com/doc/webapi</a></li>
<li><a href="https://wiki.teamfortress.com/wiki/User:RJackson/StorefrontAPI">https://wiki.teamfortress.com/wiki/User:RJackson/StorefrontAPI</a></li>
<li><a href="https://steamapi.xpaw.me/#">https://steamapi.xpaw.me/#</a></li>
<li><a href="https://steamspy.com/api.php">https://steamspy.com/api.php</a></li>
</ul>
<h2 id="Import-Libraries">Import Libraries<a class="anchor-link" href="#Import-Libraries">&#182;</a></h2><p>We begin by importing the libraries we will be using. We start with <a href="https://docs.python.org/3/library/">standard library imports</a>, or those available by default in Python, then import the third-party packages. We'll be using <a href="https://2.python-requests.org/en/master/">requests</a> to handle interacting with the APIs, then the popular <a href="http://pandas.pydata.org/pandas-docs/stable/">pandas</a> and <a href="https://docs.scipy.org/doc/numpy/index.html">numpy</a> libraries for handling the downloaded data.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># standard library imports</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">statistics</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># third-party imports</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># customisations - ensure tables show all columns</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">&quot;max_columns&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, we define a general, all-purpose function to process get requests from an API, supplied through a URL parameter. A dictionary of parameters can be supplied which is passed into the get request automatically, depending on the requirements of the API.</p>
<p>Rather than simply returning the response, we handle a couple of scenarios to help automation. Occasionally we encounter an SSL Error, in which case we simply wait a few seconds then try again (by recursively calling the function). When this happens, and generally throughout this project, we provide quite verbose feedback to show when these errors are encountered and how they are handled.</p>
<p>Sometimes there is no response when a request is made (returns None). This usually happens when too many requests are made in a short period of time, and the polling limit has been reached. We try to avoid this by pausing briefly between requests, as we'll see later, but in case we breach the polling limit we wait 10 seconds then try again.</p>
<p>Handling these errors in this way ensures that our function almost always returns the desired response, which we return in json format to make processing easier.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return json-formatted response of a get request using optional parameters.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    url : string</span>
<span class="sd">    parameters : {&#39;parameter&#39;: &#39;value&#39;}</span>
<span class="sd">        parameters to pass as part of get request</span>
<span class="sd">    </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    json_data</span>
<span class="sd">        json-formatted response (dict-like)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">SSLError</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SSL Error:&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\r</span><span class="s1">Waiting... (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\r</span><span class="s1">Retrying.&#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
        
        <span class="c1"># recusively try again</span>
        <span class="k">return</span> <span class="n">get_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">response</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># response is none usually means too many requests. Wait and try again </span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No response, waiting 10 seconds...&#39;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Retrying.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">get_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Generate-List-of-App-IDs">Generate List of App IDs<a class="anchor-link" href="#Generate-List-of-App-IDs">&#182;</a></h2><p>Every app on the steam store has a unique app ID. Whilst different apps can have the same name, they can't have the same ID. This will be very useful to us for identifying apps and eventually merging our tables of data.</p>
<p>Before we get to that, we need to generate a list of app ids which we can use to build our data sets. It's possible to generate one from the Steam API, however this has over 70,000 entries, many of which are demos and videos with no way to tell them apart. Instead, SteamSpy provides an 'all' request, supplying some information about the apps they track. It doesn't supply all information about each app, so we still need to request this information individually, but it provides a good starting point.</p>
<p>Because many of the return fields are strings containing commas and other punctuation, it is easiest to read the response into a pandas dataframe, and export the required appid and name fields to a csv. We could keep only the appid column as a list or pandas series, but it may be useful to keep the app name at this stage.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://steamspy.com/api.php&quot;</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="s2">&quot;all&quot;</span><span class="p">}</span>

<span class="c1"># request &#39;all&#39; from steam spy and parse into dataframe</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">get_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
<span class="n">steam_spy_all</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>

<span class="c1"># generate sorted app_list from steamspy data</span>
<span class="n">app_list</span> <span class="o">=</span> <span class="n">steam_spy_all</span><span class="p">[[</span><span class="s1">&#39;appid&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;appid&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># export disabled to keep consistency across download sessions</span>
<span class="c1"># app_list.to_csv(&#39;../data/download/app_list.csv&#39;, index=False)</span>

<span class="c1"># instead read from stored csv</span>
<span class="n">app_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/download/app_list.csv&#39;</span><span class="p">)</span>

<span class="c1"># display first few rows</span>
<span class="n">app_list</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>appid</th>
      <th>name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>Counter-Strike</td>
    </tr>
    <tr>
      <th>1</th>
      <td>20</td>
      <td>Team Fortress Classic</td>
    </tr>
    <tr>
      <th>2</th>
      <td>30</td>
      <td>Day of Defeat</td>
    </tr>
    <tr>
      <th>3</th>
      <td>40</td>
      <td>Deathmatch Classic</td>
    </tr>
    <tr>
      <th>4</th>
      <td>50</td>
      <td>Half-Life: Opposing Force</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Define-Download-Logic">Define Download Logic<a class="anchor-link" href="#Define-Download-Logic">&#182;</a></h2><p>Now we have the <code>app_list</code> dataframe, we can iterate over the app IDs and request individual app data from the servers. Here we set out our logic to retrieve and process this information, then finally store the data as a csv file.</p>
<p>Because it takes a long time to retrieve the data, it would be dangerous to attempt it all in one go as any errors or connection time-outs could cause the loss of all our data. For this reason we define a function to download and process the requests in batches, appending each batch to an external file and keeping track of the highest index written in a separate file.</p>
<p>This not only provides security, allowing us to easily restart the process if an error is encountered, but also means we can complete the download across multiple sessions.</p>
<p>Again, we provide verbose output for rows exported, batches complete, time taken and estimated time remaining.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_app_data</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">pause</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return list of app data generated from parser.</span>
<span class="sd">    </span>
<span class="sd">    parser : function to handle request</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app_data</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="c1"># iterate through each row of app_list, confined by start and stop</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">app_list</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">stop</span><span class="p">]</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Current index: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">index</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\r</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="n">appid</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;appid&#39;</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

        <span class="c1"># retrive app data for a row, handled by supplied parser, and append to list</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">parser</span><span class="p">(</span><span class="n">appid</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">app_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">pause</span><span class="p">)</span> <span class="c1"># prevent overloading api with requests</span>
    
    <span class="k">return</span> <span class="n">app_data</span>


<span class="k">def</span> <span class="nf">process_batches</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">app_list</span><span class="p">,</span> <span class="n">download_path</span><span class="p">,</span> <span class="n">data_filename</span><span class="p">,</span> <span class="n">index_filename</span><span class="p">,</span>
                    <span class="n">columns</span><span class="p">,</span> <span class="n">begin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">batchsize</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process app data in batches, writing directly to file.</span>
<span class="sd">    </span>
<span class="sd">    parser : custom function to format request</span>
<span class="sd">    app_list : dataframe of appid and name</span>
<span class="sd">    download_path : path to store data</span>
<span class="sd">    data_filename : filename to save app data</span>
<span class="sd">    index_filename : filename to store highest index written</span>
<span class="sd">    columns : column names for file</span>
<span class="sd">    </span>
<span class="sd">    Keyword arguments:</span>
<span class="sd">    </span>
<span class="sd">    begin : starting index (get from index_filename, default 0)</span>
<span class="sd">    end : index to finish (defaults to end of app_list)</span>
<span class="sd">    batchsize : number of apps to write in each batch (default 100)</span>
<span class="sd">    pause : time to wait after each api request (defualt 1)</span>
<span class="sd">    </span>
<span class="sd">    returns: none</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting at index </span><span class="si">{}</span><span class="s1">:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">begin</span><span class="p">))</span>
    
    <span class="c1"># by default, process all apps in app_list</span>
    <span class="k">if</span> <span class="n">end</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">end</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">app_list</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    
    <span class="c1"># generate array of batch begin and end points</span>
    <span class="n">batches</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">batchsize</span><span class="p">)</span>
    <span class="n">batches</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">batches</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
    
    <span class="n">apps_written</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">batch_times</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">batches</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        
        <span class="n">start</span> <span class="o">=</span> <span class="n">batches</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">stop</span> <span class="o">=</span> <span class="n">batches</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="n">app_data</span> <span class="o">=</span> <span class="n">get_app_data</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">pause</span><span class="p">)</span>
        
        <span class="n">rel_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">data_filename</span><span class="p">)</span>
        
        <span class="c1"># writing app data to file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">rel_path</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">extrasaction</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
            
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">About to write data, don&#39;t stop script! (</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            
            <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">app_data</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\r</span><span class="s1">Exported lines </span><span class="si">{}</span><span class="s1">-</span><span class="si">{}</span><span class="s1"> to </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">data_filename</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            
        <span class="n">apps_written</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">app_data</span><span class="p">)</span>
        
        <span class="n">idx_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">index_filename</span><span class="p">)</span>
        
        <span class="c1"># writing last index to file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">idx_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">stop</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
            
        <span class="c1"># logging time taken</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">time_taken</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
        
        <span class="n">batch_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">time_taken</span><span class="p">)</span>
        <span class="n">mean_time</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">batch_times</span><span class="p">)</span>
        
        <span class="n">est_remaining</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">batches</span><span class="p">)</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">mean_time</span>
        
        <span class="n">remaining_td</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">est_remaining</span><span class="p">))</span>
        <span class="n">time_td</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">time_taken</span><span class="p">))</span>
        <span class="n">mean_td</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">mean_time</span><span class="p">))</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Batch </span><span class="si">{}</span><span class="s1"> time: </span><span class="si">{}</span><span class="s1"> (avg: </span><span class="si">{}</span><span class="s1">, remaining: </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">time_td</span><span class="p">,</span> <span class="n">mean_td</span><span class="p">,</span> <span class="n">remaining_td</span><span class="p">))</span>
            
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Processing batches complete. </span><span class="si">{}</span><span class="s1"> apps written&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">apps_written</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next we define some functions to handle and prepare the external files.</p>
<p>We use <code>reset_index</code> for testing and demonstration, allowing us to easily reset the index in the stored file to 0, effectively restarting the entire download process.</p>
<p>We define <code>get_index</code> to retrieve the index from file, maintaining persistence across sessions. Every time a batch of information (app data) is written to file, we write the highest index within <code>app_data</code> that was retrieved. As stated, this is partially for security, ensuring that if there is an error during the download we can read the index from file and continue from the end of the last successful batch. Keeping track of the index also allows us to pause the download, continuing at a later time.</p>
<p>Finally, the <code>prepare_data_file</code> function readies the csv for storing the data. If the index we retrieved is 0, it means we are either starting for the first time or starting over. In either case, we want a blank csv file with only the header row to begin writing to, se we wipe the file (by opening in write mode) and write the header. Conversely, if the index is anything other than 0, it means we already have downloaded information, and can leave the csv file alone.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">reset_index</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">index_filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reset index in file to 0.&quot;&quot;&quot;</span>
    <span class="n">rel_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">index_filename</span><span class="p">)</span>
    
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">rel_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
        

<span class="k">def</span> <span class="nf">get_index</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">index_filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve index from file, returning 0 if file not found.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">rel_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">index_filename</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">rel_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">())</span>
    
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        
    <span class="k">return</span> <span class="n">index</span>


<span class="k">def</span> <span class="nf">prepare_data_file</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create file and write headers if index is 0.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">rel_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">rel_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Download-Steam-Data">Download Steam Data<a class="anchor-link" href="#Download-Steam-Data">&#182;</a></h2><p>Now we are ready to start downloading data and writing to file. We define our logic particular to handling the steam API - in fact if no data is returned we return just the name and appid - then begin setting some parameters. We define the files we will write our data and index to, and the columns for the csv file. The API doesn't return every column for every app, so it is best to explicitly set these.</p>
<p>Next we run our functions to set up the files, and make a call to <code>process_batches</code> to begin the process. Some additional parameters have been added for demonstration, to constrain the download to just a few rows and smaller batches. Removing these would allow the entire download process to be repeated.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">parse_steam_request</span><span class="p">(</span><span class="n">appid</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Unique parser to handle data from Steam Store API.</span>
<span class="sd">    </span>
<span class="sd">    Returns : json formatted data (dict-like)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://store.steampowered.com/api/appdetails/&quot;</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;appids&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">}</span>
    
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">get_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
    <span class="n">json_app_data</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">appid</span><span class="p">)]</span>
    
    <span class="k">if</span> <span class="n">json_app_data</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json_app_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;steam_appid&#39;</span><span class="p">:</span> <span class="n">appid</span><span class="p">}</span>
        
    <span class="k">return</span> <span class="n">data</span>


<span class="c1"># Set file parameters</span>
<span class="n">download_path</span> <span class="o">=</span> <span class="s1">&#39;../data/download&#39;</span>
<span class="n">steam_app_data</span> <span class="o">=</span> <span class="s1">&#39;steam_app_data.csv&#39;</span>
<span class="n">steam_index</span> <span class="o">=</span> <span class="s1">&#39;steam_index.txt&#39;</span>

<span class="n">steam_columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;steam_appid&#39;</span><span class="p">,</span> <span class="s1">&#39;required_age&#39;</span><span class="p">,</span> <span class="s1">&#39;is_free&#39;</span><span class="p">,</span> <span class="s1">&#39;controller_support&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dlc&#39;</span><span class="p">,</span> <span class="s1">&#39;detailed_description&#39;</span><span class="p">,</span> <span class="s1">&#39;about_the_game&#39;</span><span class="p">,</span> <span class="s1">&#39;short_description&#39;</span><span class="p">,</span> <span class="s1">&#39;fullgame&#39;</span><span class="p">,</span>
    <span class="s1">&#39;supported_languages&#39;</span><span class="p">,</span> <span class="s1">&#39;header_image&#39;</span><span class="p">,</span> <span class="s1">&#39;website&#39;</span><span class="p">,</span> <span class="s1">&#39;pc_requirements&#39;</span><span class="p">,</span> <span class="s1">&#39;mac_requirements&#39;</span><span class="p">,</span>
    <span class="s1">&#39;linux_requirements&#39;</span><span class="p">,</span> <span class="s1">&#39;legal_notice&#39;</span><span class="p">,</span> <span class="s1">&#39;drm_notice&#39;</span><span class="p">,</span> <span class="s1">&#39;ext_user_account_notice&#39;</span><span class="p">,</span>
    <span class="s1">&#39;developers&#39;</span><span class="p">,</span> <span class="s1">&#39;publishers&#39;</span><span class="p">,</span> <span class="s1">&#39;demos&#39;</span><span class="p">,</span> <span class="s1">&#39;price_overview&#39;</span><span class="p">,</span> <span class="s1">&#39;packages&#39;</span><span class="p">,</span> <span class="s1">&#39;package_groups&#39;</span><span class="p">,</span>
    <span class="s1">&#39;platforms&#39;</span><span class="p">,</span> <span class="s1">&#39;metacritic&#39;</span><span class="p">,</span> <span class="s1">&#39;reviews&#39;</span><span class="p">,</span> <span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="s1">&#39;genres&#39;</span><span class="p">,</span> <span class="s1">&#39;screenshots&#39;</span><span class="p">,</span>
    <span class="s1">&#39;movies&#39;</span><span class="p">,</span> <span class="s1">&#39;recommendations&#39;</span><span class="p">,</span> <span class="s1">&#39;achievements&#39;</span><span class="p">,</span> <span class="s1">&#39;release_date&#39;</span><span class="p">,</span> <span class="s1">&#39;support_info&#39;</span><span class="p">,</span>
    <span class="s1">&#39;background&#39;</span><span class="p">,</span> <span class="s1">&#39;content_descriptors&#39;</span>
<span class="p">]</span>

<span class="c1"># Overwrites last index for demonstration (would usually store highest index so can continue across sessions)</span>
<span class="n">reset_index</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">steam_index</span><span class="p">)</span>

<span class="c1"># Retrieve last index downloaded from file</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">get_index</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">steam_index</span><span class="p">)</span>

<span class="c1"># Wipe or create data file and write headers if index is 0</span>
<span class="n">prepare_data_file</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">steam_app_data</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">steam_columns</span><span class="p">)</span>

<span class="c1"># Set end and chunksize for demonstration - remove to run through entire app list</span>
<span class="n">process_batches</span><span class="p">(</span>
    <span class="n">parser</span><span class="o">=</span><span class="n">parse_steam_request</span><span class="p">,</span>
    <span class="n">app_list</span><span class="o">=</span><span class="n">app_list</span><span class="p">,</span>
    <span class="n">download_path</span><span class="o">=</span><span class="n">download_path</span><span class="p">,</span>
    <span class="n">data_filename</span><span class="o">=</span><span class="n">steam_app_data</span><span class="p">,</span>
    <span class="n">index_filename</span><span class="o">=</span><span class="n">steam_index</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">steam_columns</span><span class="p">,</span>
    <span class="n">begin</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
    <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">batchsize</span><span class="o">=</span><span class="mi">5</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Starting at index 0:

Exported lines 0-4 to steam_app_data.csv. Batch 0 time: 0:00:10 (avg: 0:00:10, remaining: 0:00:10)
Exported lines 5-9 to steam_app_data.csv. Batch 1 time: 0:00:10 (avg: 0:00:10, remaining: 0:00:00)

Processing batches complete. 10 apps written
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># inspect downloaded data</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/download/steam_app_data.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>type</th>
      <th>name</th>
      <th>steam_appid</th>
      <th>required_age</th>
      <th>is_free</th>
      <th>controller_support</th>
      <th>dlc</th>
      <th>detailed_description</th>
      <th>about_the_game</th>
      <th>short_description</th>
      <th>fullgame</th>
      <th>supported_languages</th>
      <th>header_image</th>
      <th>website</th>
      <th>pc_requirements</th>
      <th>mac_requirements</th>
      <th>linux_requirements</th>
      <th>legal_notice</th>
      <th>drm_notice</th>
      <th>ext_user_account_notice</th>
      <th>developers</th>
      <th>publishers</th>
      <th>demos</th>
      <th>price_overview</th>
      <th>packages</th>
      <th>package_groups</th>
      <th>platforms</th>
      <th>metacritic</th>
      <th>reviews</th>
      <th>categories</th>
      <th>genres</th>
      <th>screenshots</th>
      <th>movies</th>
      <th>recommendations</th>
      <th>achievements</th>
      <th>release_date</th>
      <th>support_info</th>
      <th>background</th>
      <th>content_descriptors</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>game</td>
      <td>Counter-Strike</td>
      <td>10</td>
      <td>0</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Play the world's number 1 online action game. ...</td>
      <td>Play the world's number 1 online action game. ...</td>
      <td>Play the world's number 1 online action game. ...</td>
      <td>NaN</td>
      <td>English&lt;strong&gt;*&lt;/strong&gt;, French&lt;strong&gt;*&lt;/st...</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/10/...</td>
      <td>NaN</td>
      <td>{'minimum': '\r\n\t\t\t&lt;p&gt;&lt;strong&gt;Minimum:&lt;/st...</td>
      <td>{'minimum': 'Minimum: OS X  Snow Leopard 10.6....</td>
      <td>{'minimum': 'Minimum: Linux Ubuntu 12.04, Dual...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>['Valve']</td>
      <td>['Valve']</td>
      <td>NaN</td>
      <td>{'currency': 'GBP', 'initial': 719, 'final': 7...</td>
      <td>[7]</td>
      <td>[{'name': 'default', 'title': 'Buy Counter-Str...</td>
      <td>{'windows': True, 'mac': True, 'linux': True}</td>
      <td>{'score': 88, 'url': 'https://www.metacritic.c...</td>
      <td>NaN</td>
      <td>[{'id': 1, 'description': 'Multi-player'}, {'i...</td>
      <td>[{'id': '1', 'description': 'Action'}]</td>
      <td>[{'id': 0, 'path_thumbnail': 'https://steamcdn...</td>
      <td>NaN</td>
      <td>{'total': 66232}</td>
      <td>{'total': 0}</td>
      <td>{'coming_soon': False, 'date': '1 Nov, 2000'}</td>
      <td>{'url': 'http://steamcommunity.com/app/10', 'e...</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/10/...</td>
      <td>{'ids': [2, 5], 'notes': 'Includes intense vio...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>game</td>
      <td>Team Fortress Classic</td>
      <td>20</td>
      <td>0</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>One of the most popular online action games of...</td>
      <td>One of the most popular online action games of...</td>
      <td>One of the most popular online action games of...</td>
      <td>NaN</td>
      <td>English, French, German, Italian, Spanish - Sp...</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/20/...</td>
      <td>NaN</td>
      <td>{'minimum': '\r\n\t\t\t&lt;p&gt;&lt;strong&gt;Minimum:&lt;/st...</td>
      <td>{'minimum': 'Minimum: OS X  Snow Leopard 10.6....</td>
      <td>{'minimum': 'Minimum: Linux Ubuntu 12.04, Dual...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>['Valve']</td>
      <td>['Valve']</td>
      <td>NaN</td>
      <td>{'currency': 'GBP', 'initial': 399, 'final': 3...</td>
      <td>[29]</td>
      <td>[{'name': 'default', 'title': 'Buy Team Fortre...</td>
      <td>{'windows': True, 'mac': True, 'linux': True}</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>[{'id': 1, 'description': 'Multi-player'}, {'i...</td>
      <td>[{'id': '1', 'description': 'Action'}]</td>
      <td>[{'id': 0, 'path_thumbnail': 'https://steamcdn...</td>
      <td>NaN</td>
      <td>{'total': 2816}</td>
      <td>{'total': 0}</td>
      <td>{'coming_soon': False, 'date': '1 Apr, 1999'}</td>
      <td>{'url': '', 'email': ''}</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/20/...</td>
      <td>{'ids': [2, 5], 'notes': 'Includes intense vio...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>game</td>
      <td>Day of Defeat</td>
      <td>30</td>
      <td>0</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Enlist in an intense brand of Axis vs. Allied ...</td>
      <td>Enlist in an intense brand of Axis vs. Allied ...</td>
      <td>Enlist in an intense brand of Axis vs. Allied ...</td>
      <td>NaN</td>
      <td>English, French, German, Italian, Spanish - Spain</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/30/...</td>
      <td>http://www.dayofdefeat.com/</td>
      <td>{'minimum': '\r\n\t\t\t&lt;p&gt;&lt;strong&gt;Minimum:&lt;/st...</td>
      <td>{'minimum': 'Minimum: OS X  Snow Leopard 10.6....</td>
      <td>{'minimum': 'Minimum: Linux Ubuntu 12.04, Dual...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>['Valve']</td>
      <td>['Valve']</td>
      <td>NaN</td>
      <td>{'currency': 'GBP', 'initial': 399, 'final': 3...</td>
      <td>[30]</td>
      <td>[{'name': 'default', 'title': 'Buy Day of Defe...</td>
      <td>{'windows': True, 'mac': True, 'linux': True}</td>
      <td>{'score': 79, 'url': 'https://www.metacritic.c...</td>
      <td>NaN</td>
      <td>[{'id': 1, 'description': 'Multi-player'}, {'i...</td>
      <td>[{'id': '1', 'description': 'Action'}]</td>
      <td>[{'id': 0, 'path_thumbnail': 'https://steamcdn...</td>
      <td>NaN</td>
      <td>{'total': 2013}</td>
      <td>{'total': 0}</td>
      <td>{'coming_soon': False, 'date': '1 May, 2003'}</td>
      <td>{'url': '', 'email': ''}</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/30/...</td>
      <td>{'ids': [], 'notes': None}</td>
    </tr>
    <tr>
      <th>3</th>
      <td>game</td>
      <td>Deathmatch Classic</td>
      <td>40</td>
      <td>0</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Enjoy fast-paced multiplayer gaming with Death...</td>
      <td>Enjoy fast-paced multiplayer gaming with Death...</td>
      <td>Enjoy fast-paced multiplayer gaming with Death...</td>
      <td>NaN</td>
      <td>English, French, German, Italian, Spanish - Sp...</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/40/...</td>
      <td>NaN</td>
      <td>{'minimum': '\r\n\t\t\t&lt;p&gt;&lt;strong&gt;Minimum:&lt;/st...</td>
      <td>{'minimum': 'Minimum: OS X  Snow Leopard 10.6....</td>
      <td>{'minimum': 'Minimum: Linux Ubuntu 12.04, Dual...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>['Valve']</td>
      <td>['Valve']</td>
      <td>NaN</td>
      <td>{'currency': 'GBP', 'initial': 399, 'final': 3...</td>
      <td>[31]</td>
      <td>[{'name': 'default', 'title': 'Buy Deathmatch ...</td>
      <td>{'windows': True, 'mac': True, 'linux': True}</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>[{'id': 1, 'description': 'Multi-player'}, {'i...</td>
      <td>[{'id': '1', 'description': 'Action'}]</td>
      <td>[{'id': 0, 'path_thumbnail': 'https://steamcdn...</td>
      <td>NaN</td>
      <td>{'total': 942}</td>
      <td>{'total': 0}</td>
      <td>{'coming_soon': False, 'date': '1 Jun, 2001'}</td>
      <td>{'url': '', 'email': ''}</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/40/...</td>
      <td>{'ids': [], 'notes': None}</td>
    </tr>
    <tr>
      <th>4</th>
      <td>game</td>
      <td>Half-Life: Opposing Force</td>
      <td>50</td>
      <td>0</td>
      <td>False</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Return to the Black Mesa Research Facility as ...</td>
      <td>Return to the Black Mesa Research Facility as ...</td>
      <td>Return to the Black Mesa Research Facility as ...</td>
      <td>NaN</td>
      <td>English, French, German, Korean</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/50/...</td>
      <td>NaN</td>
      <td>{'minimum': '\r\n\t\t\t&lt;p&gt;&lt;strong&gt;Minimum:&lt;/st...</td>
      <td>{'minimum': 'Minimum: OS X  Snow Leopard 10.6....</td>
      <td>{'minimum': 'Minimum: Linux Ubuntu 12.04, Dual...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>['Gearbox Software']</td>
      <td>['Valve']</td>
      <td>NaN</td>
      <td>{'currency': 'GBP', 'initial': 399, 'final': 3...</td>
      <td>[32]</td>
      <td>[{'name': 'default', 'title': 'Buy Half-Life: ...</td>
      <td>{'windows': True, 'mac': True, 'linux': True}</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>[{'id': 2, 'description': 'Single-player'}, {'...</td>
      <td>[{'id': '1', 'description': 'Action'}]</td>
      <td>[{'id': 0, 'path_thumbnail': 'https://steamcdn...</td>
      <td>NaN</td>
      <td>{'total': 4402}</td>
      <td>{'total': 0}</td>
      <td>{'coming_soon': False, 'date': '1 Nov, 1999'}</td>
      <td>{'url': 'https://help.steampowered.com', 'emai...</td>
      <td>https://steamcdn-a.akamaihd.net/steam/apps/50/...</td>
      <td>{'ids': [], 'notes': None}</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Download-SteamSpy-data">Download SteamSpy data<a class="anchor-link" href="#Download-SteamSpy-data">&#182;</a></h2><p>To retrieve data from SteamSpy we perform a very similar process. Our parse function is a little simpler because of the how data is returned, and the maximum polling rate of this API is higher so we can set a lower value for <code>pause</code> in the <code>process_batches</code> function and download more quickly. Apart from that we set the new variables and make a call to the <code>process_batches</code> function once again.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">parse_steamspy_request</span><span class="p">(</span><span class="n">appid</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Parser to handle SteamSpy API data.&quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://steamspy.com/api.php&quot;</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="s2">&quot;appdetails&quot;</span><span class="p">,</span> <span class="s2">&quot;appid&quot;</span><span class="p">:</span> <span class="n">appid</span><span class="p">}</span>
    
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">get_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">json_data</span>


<span class="c1"># set files and columns</span>
<span class="n">download_path</span> <span class="o">=</span> <span class="s1">&#39;../data/download&#39;</span>
<span class="n">steamspy_data</span> <span class="o">=</span> <span class="s1">&#39;steamspy_data.csv&#39;</span>
<span class="n">steamspy_index</span> <span class="o">=</span> <span class="s1">&#39;steamspy_index.txt&#39;</span>

<span class="n">steamspy_columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;appid&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;developer&#39;</span><span class="p">,</span> <span class="s1">&#39;publisher&#39;</span><span class="p">,</span> <span class="s1">&#39;score_rank&#39;</span><span class="p">,</span> <span class="s1">&#39;positive&#39;</span><span class="p">,</span>
    <span class="s1">&#39;negative&#39;</span><span class="p">,</span> <span class="s1">&#39;userscore&#39;</span><span class="p">,</span> <span class="s1">&#39;owners&#39;</span><span class="p">,</span> <span class="s1">&#39;average_forever&#39;</span><span class="p">,</span> <span class="s1">&#39;average_2weeks&#39;</span><span class="p">,</span>
    <span class="s1">&#39;median_forever&#39;</span><span class="p">,</span> <span class="s1">&#39;median_2weeks&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;initialprice&#39;</span><span class="p">,</span> <span class="s1">&#39;discount&#39;</span><span class="p">,</span>
    <span class="s1">&#39;languages&#39;</span><span class="p">,</span> <span class="s1">&#39;genre&#39;</span><span class="p">,</span> <span class="s1">&#39;ccu&#39;</span><span class="p">,</span> <span class="s1">&#39;tags&#39;</span>
<span class="p">]</span>

<span class="n">reset_index</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">steamspy_index</span><span class="p">)</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">get_index</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">steamspy_index</span><span class="p">)</span>

<span class="c1"># Wipe data file if index is 0</span>
<span class="n">prepare_data_file</span><span class="p">(</span><span class="n">download_path</span><span class="p">,</span> <span class="n">steamspy_data</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">steamspy_columns</span><span class="p">)</span>

<span class="n">process_batches</span><span class="p">(</span>
    <span class="n">parser</span><span class="o">=</span><span class="n">parse_steamspy_request</span><span class="p">,</span>
    <span class="n">app_list</span><span class="o">=</span><span class="n">app_list</span><span class="p">,</span>
    <span class="n">download_path</span><span class="o">=</span><span class="n">download_path</span><span class="p">,</span> 
    <span class="n">data_filename</span><span class="o">=</span><span class="n">steamspy_data</span><span class="p">,</span>
    <span class="n">index_filename</span><span class="o">=</span><span class="n">steamspy_index</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">steamspy_columns</span><span class="p">,</span>
    <span class="n">begin</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
    <span class="n">end</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">batchsize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">pause</span><span class="o">=</span><span class="mf">0.3</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Starting at index 0:

Exported lines 0-4 to steamspy_data.csv. Batch 0 time: 0:00:04 (avg: 0:00:04, remaining: 0:00:11)
Exported lines 5-9 to steamspy_data.csv. Batch 1 time: 0:00:04 (avg: 0:00:04, remaining: 0:00:07)
Exported lines 10-14 to steamspy_data.csv. Batch 2 time: 0:00:04 (avg: 0:00:04, remaining: 0:00:04)
Exported lines 15-19 to steamspy_data.csv. Batch 3 time: 0:00:04 (avg: 0:00:04, remaining: 0:00:00)

Processing batches complete. 20 apps written
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># inspect downloaded steamspy data</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/download/steamspy_data.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>appid</th>
      <th>name</th>
      <th>developer</th>
      <th>publisher</th>
      <th>score_rank</th>
      <th>positive</th>
      <th>negative</th>
      <th>userscore</th>
      <th>owners</th>
      <th>average_forever</th>
      <th>average_2weeks</th>
      <th>median_forever</th>
      <th>median_2weeks</th>
      <th>price</th>
      <th>initialprice</th>
      <th>discount</th>
      <th>languages</th>
      <th>genre</th>
      <th>ccu</th>
      <th>tags</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10</td>
      <td>Counter-Strike</td>
      <td>Valve</td>
      <td>Valve</td>
      <td>NaN</td>
      <td>125219</td>
      <td>3366</td>
      <td>0</td>
      <td>20,000,000 .. 50,000,000</td>
      <td>11760</td>
      <td>1</td>
      <td>435</td>
      <td>1</td>
      <td>999</td>
      <td>999</td>
      <td>0</td>
      <td>English, French, German, Italian, Spanish - Sp...</td>
      <td>Action</td>
      <td>0</td>
      <td>{'Action': 5247, 'FPS': 4638, 'Multiplayer': 3...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>20</td>
      <td>Team Fortress Classic</td>
      <td>Valve</td>
      <td>Valve</td>
      <td>NaN</td>
      <td>3337</td>
      <td>634</td>
      <td>0</td>
      <td>2,000,000 .. 5,000,000</td>
      <td>19</td>
      <td>0</td>
      <td>25</td>
      <td>0</td>
      <td>499</td>
      <td>499</td>
      <td>0</td>
      <td>English, French, German, Italian, Spanish - Sp...</td>
      <td>Action</td>
      <td>0</td>
      <td>{'Action': 721, 'FPS': 289, 'Multiplayer': 241...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>30</td>
      <td>Day of Defeat</td>
      <td>Valve</td>
      <td>Valve</td>
      <td>NaN</td>
      <td>3451</td>
      <td>405</td>
      <td>0</td>
      <td>5,000,000 .. 10,000,000</td>
      <td>15</td>
      <td>0</td>
      <td>9</td>
      <td>0</td>
      <td>499</td>
      <td>499</td>
      <td>0</td>
      <td>English, French, German, Italian, Spanish - Spain</td>
      <td>Action</td>
      <td>0</td>
      <td>{'FPS': 769, 'World War II': 237, 'Multiplayer...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>40</td>
      <td>Deathmatch Classic</td>
      <td>Valve</td>
      <td>Valve</td>
      <td>NaN</td>
      <td>1288</td>
      <td>270</td>
      <td>0</td>
      <td>5,000,000 .. 10,000,000</td>
      <td>9</td>
      <td>0</td>
      <td>12</td>
      <td>0</td>
      <td>499</td>
      <td>499</td>
      <td>0</td>
      <td>English, French, German, Italian, Spanish - Sp...</td>
      <td>Action</td>
      <td>0</td>
      <td>{'Action': 620, 'FPS': 132, 'Classic': 99, 'Mu...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>50</td>
      <td>Half-Life: Opposing Force</td>
      <td>Gearbox Software</td>
      <td>Valve</td>
      <td>NaN</td>
      <td>5296</td>
      <td>295</td>
      <td>0</td>
      <td>5,000,000 .. 10,000,000</td>
      <td>381</td>
      <td>0</td>
      <td>389</td>
      <td>0</td>
      <td>499</td>
      <td>499</td>
      <td>0</td>
      <td>English, French, German, Korean</td>
      <td>Action</td>
      <td>0</td>
      <td>{'FPS': 853, 'Action': 278, 'Classic': 227, 'S...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Next-Steps">Next Steps<a class="anchor-link" href="#Next-Steps">&#182;</a></h2><p>Here we have defined and demonstrated the download process used to generate the data sets. This was completed separately but the full, raw data can be found <a href="https://kaggle.com/nikdavis/steam-store-raw">on Kaggle</a>.</p>
<p>We now have two tables of data with a variety of information about apps on the Steam store. From the Steam data it looks like there are some useful columns like <code>required_age</code>, <code>developers</code> and <code>genres</code> which we can eventually turn into features for analysis, and a <code>price_overview</code> column which may inform the success and sales of each game. The <code>owners</code> column of the SteamSpy data could be useful, however the <a href="https://steamspy.com/about">margin of error</a> means data may not be accurate enough for meaningful analysis, we'll have to see what we can manage after cleaning. Instead we may have to use the <code>positive</code> and <code>negative</code> ratings or average play-time to create our metrics. There is also a <code>tags</code> column which appears to crossover with the <code>categories</code> and <code>genres</code> columns in the Steam data. We may wish to merge these, or keep one over the other.</p>
<p>These are all decisions we'll come to in later stages of the project. With the data downloaded, this stage is now complete. In the next step, we'll take care of preparing and cleaning the data, readying a complete data set to use for analysis.</p>

</div>
</div>
</div>
 


<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
</p>
<p>Thanks for joining me, and I welcome any feedback or suggestions you may have in the comments below.</p>
        </div>

        <div class="meta">
            <div>
                    <a href="https://nik-davis.github.io/tag/steam.html" class="tag">steam</a>
                    <a href="https://nik-davis.github.io/tag/jupyter.html" class="tag">jupyter</a>
                    <a href="https://nik-davis.github.io/tag/python.html" class="tag">python</a>
                    <a href="https://nik-davis.github.io/tag/data.html" class="tag">data</a>
            </div>
        </div>
        <div class="comments">
            <h1>Comments</h1>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'nikdavis';
                var disqus_identifier = 'posts/2019/steam-data-collection/';
                var disqus_url = 'https://nik-davis.github.io/posts/2019/steam-data-collection/';
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//nikdavis.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </article>
</div>

    </div>

<!-- <footer>
    <p>
    © 2012-2017 Nik Davis, license <a href=""> </a>
    unless otherwise noted.
    Generated by <a href= "http://docs.getpelican.com/">Pelican</a>.
    </p>
</footer> -->

</body>
</html>